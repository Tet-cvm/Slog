(function(e){function t(t){for(var o,s,l=t[0],n=t[1],d=t[2],m=0,u=[];m<l.length;m++)s=l[m],i[s]&&u.push(i[s][0]),i[s]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);c&&c(t);while(u.length)u.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],o=!0,l=1;l<a.length;l++){var n=a[l];0!==i[n]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var o={},i={app:0},r=[];function s(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=o,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(a,o,function(t){return e[t]}.bind(null,o));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=n;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0861":function(e,t,a){},1:function(e,t){},"187b":function(e,t,a){},"1d26":function(e,t,a){},"35fa":function(e,t,a){},3630:function(e,t,a){e.exports=a.p+"static/img/default_member.a3b8f344.png"},"45a1":function(e,t,a){},4869:function(e,t,a){"use strict";var o=a("84aa"),i=a.n(o);i.a},"4ab2":function(e,t,a){},"4b36":function(e,t,a){"use strict";var o=a("5cba"),i=a.n(o);i.a},"4dcb":function(e,t,a){},5464:function(e,t,a){"use strict";var o=a("89b8"),i=a.n(o);i.a},"5c48":function(e,t,a){},"5cba":function(e,t,a){},"6b64":function(e,t,a){"use strict";var o=a("1d26"),i=a.n(o);i.a},"7c55":function(e,t,a){"use strict";var o=a("5c48"),i=a.n(o);i.a},"84aa":function(e,t,a){},"89b8":function(e,t,a){},a1d8:function(e,t,a){e.exports=a.p+"static/img/logo.8588584f.png"},be37:function(e,t,a){"use strict";var o=a("187b"),i=a.n(o);i.a},bf35:function(e,t,a){},c6f5:function(e,t,a){"use strict";var o=a("0861"),i=a.n(o);i.a},ccca:function(e,t,a){"use strict";var o=a("45a1"),i=a.n(o);i.a},cd49:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var o=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s={name:"App",data:function(){return{}}},l=s,n=(a("7c55"),a("2877")),d=Object(n["a"])(l,i,r,!1,null,null,null),c=d.exports,m=a("bc3a"),u=a.n(m),p=a("4328"),f=a.n(p);function g(e,t,a){e.$message({message:a,type:t})}function b(e,t,a){var o=new Date;o.setSeconds(o.getSeconds()+a),document.cookie=e+"="+escape(t)+"; expires="+o.toGMTString()}function h(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var a=document.cookie.indexOf(";",t);return-1==a&&(a=document.cookie.length),unescape(document.cookie.substring(t,a))}}return""}function v(e){b(e,"",-1)}var x=a("5c96"),F=a.n(x),k=(a("0fae"),a("7f10"),a("35fa"),a("4dcb"),a("28dd")),$=a("8c4f"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"grid-content tet-content"},[a("div",{staticClass:"tet-login"},[a("div",{staticClass:"tet-title"},[e._v("Movie")]),a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","prefix-icon":"fa fa-user fa-lg",placeholder:"账户"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","prefix-icon":"fa fa-unlock-alt fa-lg",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.disabled,loading:e.loading},on:{click:function(t){e.onSubmit("loginForm")}}},[e._v("立即登录")])],1)],1)],1)])])},w=[],_={name:"Login",data:function(){return{disabled:!0,loading:!1,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]}}},watch:{loginForm:{handler:function(){this.loginForm.username.length>4&&this.loginForm.password.length>5?this.disabled=!1:this.disabled=!0},deep:!0}},mounted:function(){var e=this;e.$getCookie("key")&&this.$router.push("main")},methods:{onSubmit:function(e){var t=this;t.loading=!0,t.$refs[e].validate(function(e){if(!e)return!1;t.$axios.post("/apilogin/login",t.$qs.stringify(t.loginForm),{}).then(function(e){console.log(e,"/api/login/login"),e.data.status?(t.$toast(t,"success",e.data.message),t.$setCookie("key",e.data.key,1800),setTimeout(function(){t.$router.push("main")}.bind(this),600)):(t.$toast(t,"error",e.data.message),t.loading=!1)}).catch(function(e){t.$toast(t,"error","网络错误～"),t.loading=!1})})}}},C=_,D=(a("5464"),Object(n["a"])(C,y,w,!1,null,"c31ca142",null)),S=D.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-container",[a("el-aside",[a("Aside",{attrs:{isCollapse:e.isCollapse}})],1),a("el-container",[a("el-header",[a("Header",{attrs:{isCollapse:e.isCollapse,onCollapse:e.onCollapse,onQuit:e.onQuit}})],1),a("el-main",[a("router-view")],1)],1)],1)],1)},E=[],U=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"aside"},[e._m(0),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.path,"background-color":"#545c64","text-color":"#fff",router:!0,"active-text-color":"#ffd04b",collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose}},[a("el-menu-item",{attrs:{index:"/main"}},[a("i",{staticClass:"fa fa-home fa-lg"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Home")])]),a("el-menu-item",{attrs:{index:"/movie"}},[a("i",{staticClass:"fa fa-video-camera fa-lg"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Movie")])]),a("el-menu-item",{attrs:{index:"/manage"}},[a("i",{staticClass:"fa fa-sitemap fa-lg"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Manage")])]),a("el-menu-item",{attrs:{index:"/member"}},[a("i",{staticClass:"fa fa-users fa-lg"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Member")])]),a("el-menu-item",{attrs:{index:"/dollar"}},[a("i",{staticClass:"fa fa-users fa-lg"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Dollar")])])],1)],1)}),q=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"logo"},[o("img",{attrs:{src:a("a1d8"),alt:""}})])}],O={props:["isCollapse"],name:"Aside",data:function(){return{path:"/main"}},created:function(){this.path=location.pathname},methods:{handleOpen:function(){console.log("open")},handleClose:function(){console.log("close")}}},j=O,R=(a("c6f5"),Object(n["a"])(j,U,q,!1,null,"6982695c",null)),M=R.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header flex"},[a("div",{staticClass:"collapse flexLeft",on:{click:function(t){e.onCollapse(e.isCollapse)}}},[e.isCollapse?[a("i",{staticClass:"fa fa-sign-in fa-lg"})]:[a("i",{staticClass:"fa fa-sign-in fa-lg tetRotate"})]],2),a("div",{staticClass:"tetUser flexRight"},[a("img",{attrs:{src:e.$store.state.user_icon,alt:""}}),a("span",[a("el-badge",{staticClass:"item"},[e._v(e._s(e.$store.state.user_name))])],1),a("div",{staticClass:"quit",on:{click:function(t){e.onQuit()}}},[e._v("退出")])])])},L=[],z={props:["onCollapse","isCollapse","onQuit"],name:"Header",data:function(){return{}},created:function(){},mounted:function(){}},N=z,P=(a("e672"),Object(n["a"])(N,H,L,!1,null,"3d217524",null)),T=P.exports,G={name:"Main",data:function(){return{isCollapse:!1}},components:{Aside:M,Header:T},mounted:function(){var e=this;if(""==e.$getCookie("key"))e.$router.push("/");else{var t={key:e.$getCookie("key")};e.$axios.post("/api/login/cookie",e.$qs.stringify(t),{}).then(function(t){console.log(t,"/api/login/cookie"),t.data.status?(e.$setCookie("key",e.$getCookie("key"),1800),e.$store.commit("set_user_icon",t.data.data.icon),e.$store.commit("set_user_name",t.data.data.name)):(e.$delCookie("key"),e.$router.push("/"))}).catch(function(t){e.$toast(e,"error","网络错误～"),e.loading=!1})}document.addEventListener("mousemove",function(){""!=e.$getCookie("key")&&e.$setCookie("key",e.$getCookie("key"),1800)})},methods:{onCollapse:function(e){this.isCollapse=!e},onQuit:function(){this.$delCookie("key"),this.$router.push("/")}}},Q=G,J=(a("d622"),Object(n["a"])(Q,A,E,!1,null,"556a826e",null)),B=J.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[e._v("\n    home\n")])},K=[],V={name:"Home",data:function(){return{}}},W=V,X=(a("4869"),Object(n["a"])(W,I,K,!1,null,"d77f3db2",null)),Y=X.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"movie",staticClass:"movie"},[[a("div",{ref:"search",staticClass:"search"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入ID,名称,主演"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.onSearch()}},slot:"append"})],1),a("div",{staticClass:"tag-group"},e._l(e.items,function(t,o){return a("el-tag",{key:t.label,attrs:{type:t.type,effect:"dark"},on:{click:function(t){e.onTag(o)}}},[e._v("\n                    "+e._s(t.label)+"\n                ")])}),1)],1),a("div",{staticClass:"container"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.movieData,height:e.tableHeight+"px"}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"60px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"海报"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img}})]}}])}),a("el-table-column",{attrs:{label:"主演",prop:"star"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.onFilter(t.row.star,1)))])]}}])}),a("el-table-column",{attrs:{label:"类型",prop:"series"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.onFilter(t.row.series,2)))])]}}])}),a("el-table-column",{attrs:{prop:"score",label:"评分",width:"80px"}}),a("el-table-column",{attrs:{prop:"time",label:"日期"}}),a("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success",round:""},on:{click:function(a){e.handleAdd(t.$index,t.row)}}},[e._v("新增")]),a("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)]],2)],a("el-dialog",{attrs:{title:"新增",visible:e.dialogAdd,top:"18vh","show-close":!1,width:"760px","custom-class":"dialogAdd"},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"海报"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/movie/upload",enctype:"multipart/form-data",method:"post",name:"image[]","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.addForm.imageUrl?a("img",{staticClass:"Avatar",attrs:{src:e.addForm.imageUrl}}):a("i",{staticClass:"el-icon-plus Avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"主演",prop:"star"}},[a("el-input",{attrs:{type:"text",placeholder:"李小龙;李香凝"},model:{value:e.addForm.star,callback:function(t){e.$set(e.addForm,"star",t)},expression:"addForm.star"}})],1),a("el-form-item",{attrs:{label:"评分",prop:"score"}},[a("el-input",{attrs:{type:"score",placeholder:"9.9"},model:{value:e.addForm.score,callback:function(t){e.$set(e.addForm,"score",t)},expression:"addForm.score"}})],1),a("el-form-item",{attrs:{label:"简介",prop:"describe"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12}},model:{value:e.addForm.describe,callback:function(t){e.$set(e.addForm,"describe",t)},expression:"addForm.describe"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"将夜"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"类别",prop:"series"}},[a("el-checkbox-group",{model:{value:e.addForm.series,callback:function(t){e.$set(e.addForm,"series",t)},expression:"addForm.series"}},[a("el-checkbox",{attrs:{label:"院线"}}),a("el-checkbox",{attrs:{label:"自制"}}),a("el-checkbox",{attrs:{label:"动作"}}),a("el-checkbox",{attrs:{label:"喜剧"}}),a("el-checkbox",{attrs:{label:"科幻"}}),a("el-checkbox",{attrs:{label:"犯罪"}}),a("el-checkbox",{attrs:{label:"爱情"}})],1)],1),e._l(e.addForm.domains,function(t,o){return a("el-form-item",{key:t.key,attrs:{label:"资源"+(o+1),prop:"domains."+o+".value",rules:{required:!0,message:"地址不能为空",trigger:"blur"}}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-input",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1),a("el-col",{attrs:{span:3}},[0==o?[a("i",{staticClass:"el-icon-plus",on:{click:function(t){e.addDomain(!0)}}})]:e._e(),0!=o?[a("i",{staticClass:"el-icon-minus",on:{click:function(a){a.preventDefault(),e.removeDomain(t,!0)}}})]:e._e()],2)],1)],1)}),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onAddSubmit("addForm")}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogAdd=!1}}},[e._v("取消")])],1)],2)],1)],1)],1),a("el-dialog",{attrs:{title:"新增",visible:e.dialogEdit,top:"18vh","show-close":!1,width:"760px","custom-class":"dialogEdit"},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"海报"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/movie/upload",enctype:"multipart/form-data",method:"post",name:"image[]","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editForm.imageUrl?a("img",{staticClass:"Avatar",attrs:{src:e.editForm.imageUrl}}):a("i",{staticClass:"el-icon-plus Avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"主演",prop:"star"}},[a("el-input",{attrs:{type:"text",placeholder:"李小龙;李香凝"},model:{value:e.editForm.star,callback:function(t){e.$set(e.editForm,"star",t)},expression:"editForm.star"}})],1),a("el-form-item",{attrs:{label:"评分",prop:"score"}},[a("el-input",{attrs:{type:"score",placeholder:"9.9"},model:{value:e.editForm.score,callback:function(t){e.$set(e.editForm,"score",t)},expression:"editForm.score"}})],1),a("el-form-item",{attrs:{label:"简介",prop:"describe"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12}},model:{value:e.editForm.describe,callback:function(t){e.$set(e.editForm,"describe",t)},expression:"editForm.describe"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"将夜"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"类别",prop:"series"}},[a("el-checkbox-group",{model:{value:e.editForm.series,callback:function(t){e.$set(e.editForm,"series",t)},expression:"editForm.series"}},[a("el-checkbox",{attrs:{label:"院线"}}),a("el-checkbox",{attrs:{label:"自制"}}),a("el-checkbox",{attrs:{label:"动作"}}),a("el-checkbox",{attrs:{label:"喜剧"}}),a("el-checkbox",{attrs:{label:"科幻"}}),a("el-checkbox",{attrs:{label:"犯罪"}}),a("el-checkbox",{attrs:{label:"爱情"}})],1)],1),e._l(e.editForm.domains,function(t,o){return a("el-form-item",{key:t.key,attrs:{label:"资源"+(o+1),prop:"domains."+o+".value",rules:{required:!0,message:"地址不能为空",trigger:"blur"}}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-input",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1),a("el-col",{attrs:{span:3}},[0==o?[a("i",{staticClass:"el-icon-plus",on:{click:function(t){e.addDomain(!1)}}})]:e._e(),0!=o?[a("i",{staticClass:"el-icon-minus",on:{click:function(a){a.preventDefault(),e.removeDomain(t,!1)}}})]:e._e()],2)],1)],1)}),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onEditSubmit("editForm")}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取消")])],1)],2)],1)],1)],1),a("el-dialog",{attrs:{title:"警告",visible:e.dialogDel,top:"30vh","show-close":!1,width:"320px","custom-class":"dialogDel"},on:{"update:visible":function(t){e.dialogDel=t}}},[a("span",[e._v("你确定要删除该数据吗 ?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDel=!1}}},[e._v("取 消")]),a("el-button",{on:{click:function(t){e.onDelSubmit()}}},[e._v("确 定")])],1)])],2)},ee=[],te=(a("6b54"),a("0a0d")),ae=a.n(te),oe=(a("28a5"),a("386d"),a("c5f6"),{name:"Movie",data:function(){return{search:"",select:"aaa",tableHeight:"",movieData:[],items:[{type:"primary",label:"院线"},{type:"success",label:"自制"},{type:"info",label:"动作"},{type:"warning",label:"喜剧"},{type:"danger",label:"科幻"},{type:"primary",label:"犯罪"},{type:"success",label:"爱情"}],dialogAdd:!1,addForm:{img:"",imageUrl:"",star:"",score:"",describe:"",name:"",series:[],domains:[{value:""}]},addRules:{star:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}],score:[{required:!0,message:"请输入电影评分",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],describe:[{required:!0,message:"请输入电影简介",trigger:"blur"},{min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入电影名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],series:[{type:"array",required:!0,message:"请至少选择一个类别",trigger:"change"}]},dialogEdit:!1,editForm:{id:Number,index:Number,img:"",imageUrl:"",star:"",score:"",describe:"",name:"",series:[],domains:[{value:""}]},editRules:{star:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}],score:[{required:!0,message:"请输入电影评分",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],describe:[{required:!0,message:"请输入电影简介",trigger:"blur"},{min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入电影名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],series:[{type:"array",required:!0,message:"请至少选择一个类别",trigger:"change"}]},dialogDel:!1,delForm:{index:Number,id:""}}},created:function(){var e=this;e.$axios.post("/api/movie/list",{},{}).then(function(t){console.log(t,"/api/movie/list"),t.data.length>0?e.movieData=t.data:e.dialogAdd=!0}).catch(function(t){e.$toast(e,"error","网络错误～"),e.loading=!1})},mounted:function(){var e=this;e.tableHeight=e.$refs.movie.offsetHeight-e.$refs.search.offsetHeight-80},methods:{onSearch:function(){var e=this;if(e.search){var t={search:e.search};e.$axios.post("/api/movie/search",e.$qs.stringify(t),{}).then(function(t){console.log(t,"/api/movie/search"),t.data.status?(e.movieData=t.data.data,e.$toast(e,"success",t.data.message)):e.$toast(e,"error",t.data.message)}).catch(function(t){e.$toast(e,"error","网络错误～"),e.loading=!1})}else e.$toast(e,"error","请输入内容～")},onTag:function(e){var t=this,a={tag:t.items[e].label};t.$axios.post("/api/movie/tag",t.$qs.stringify(a),{}).then(function(e){console.log(e,"/api/movie/tag"),e.data.status?(t.movieData=e.data.data,t.$toast(t,"success",e.data.message)):t.$toast(t,"error",e.data.message)}).catch(function(e){t.$toast(t,"error","网络错误～")})},onFilter:function(e,t){switch(t){case 1:for(var a=e.split(";"),o="",i=0;i<a.length;i++)o+="["+a[i]+"]";return o;case 2:console.log(e,"2222");for(var r="",s=0;s<e.length;s++)r+="["+e[s]+"]";return r}},addDomain:function(e){e?this.addForm.domains.push({value:"",key:ae()()}):this.editForm.domains.push({value:"",key:ae()()})},removeDomain:function(e,t){if(t){var a=this.addForm.domains.indexOf(e);-1!==a&&this.addForm.domains.splice(a,1)}else{a=this.editForm.domains.indexOf(e);-1!==a&&this.editForm.domains.splice(a,1)}},beforeAvatarUpload:function(e){var t=this,a="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<2;if(a){if(o)return a&&o;t.$toast(t,"error","上传头像图片大小不能超过 2MB!")}else t.$toast(t,"error","上传头像图片只能是 JPG PNG 格式!")},handleAvatarSuccess:function(e,t){console.log(e,t,"handleAvatarSuccess"),this.dialogAdd?(this.addForm.img=e,this.addForm.imageUrl=URL.createObjectURL(t.raw)):this.dialogEdit&&(this.editForm.img=e,this.editForm.imageUrl=URL.createObjectURL(t.raw))},handleAdd:function(e,t){this.dialogAdd=!0},onAddSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.$axios.post("/api/movie/add",t.$qs.stringify(t.addForm),{}).then(function(e){console.log(e,"/api/movie/add"),e.data.status?(t.dialogAdd=!1,t.movieData.push(e.data.data[0]),t.$toast(t,"success",e.data.message),console.log(t.movieData,"movieData")):t.$toast(t,"error",e.data.message)}).catch(function(e){t.$toast(t,"error","网络错误～")})})},handleEdit:function(e,t){this.editForm.id=t.id,this.editForm.index=e,this.editForm.img=t.poster,this.editForm.imageUrl=t.img,this.editForm.star=t.star,this.editForm.score=t.score.toString(),this.editForm.describe=t.describe,this.editForm.name=t.name,this.editForm.series=t.series,this.editForm.domains=t.domains,this.dialogEdit=!0,console.log(e,t)},onEditSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.$axios.post("/api/movie/edit",t.$qs.stringify(t.editForm),{}).then(function(e){console.log(e,"/api/movie/edit"),e.data.status?(t.dialogEdit=!1,t.movieData[t.editForm.index].img=e.data.data[0].img,t.movieData[t.editForm.index].imageUrl=e.data.data[0].poster,t.movieData[t.editForm.index].star=e.data.data[0].star,t.movieData[t.editForm.index].score=e.data.data[0].score,t.movieData[t.editForm.index].describe=e.data.data[0].describe,t.movieData[t.editForm.index].name=e.data.data[0].name,t.movieData[t.editForm.index].series=e.data.data[0].series,t.movieData[t.editForm.index].domains=e.data.data[0].domains,t.$toast(t,"success",e.data.message),console.log(t.movieData,"movieData")):t.$toast(t,"error",e.data.message)}).catch(function(e){t.$toast(t,"error","网络错误～")})})},handleDelete:function(e,t){console.log(e,t),this.delForm.index=e,this.delForm.id=t.id,this.dialogDel=!0},onDelSubmit:function(){var e=this,t={id:e.delForm.id};e.$axios.post("/api/movie/del",e.$qs.stringify(t),{}).then(function(t){console.log(t,"/api/movie/del"),t.data.status?(e.movieData.splice(e.delForm.index,1),e.dialogDel=!1,e.$toast(e,"success",t.data.message)):e.$toast(e,"error",t.data.message)}).catch(function(t){e.$toast(e,"error","网络错误～")})}}}),ie=oe,re=(a("ccca"),Object(n["a"])(ie,Z,ee,!1,null,"5f981c67",null)),se=re.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"manage",staticClass:"manage"},[a("div",{staticClass:"usermanage"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manageData,height:e.tableHeight+"px"}},[a("el-table-column",{attrs:{label:"序号",prop:"id",width:"60px"}}),a("el-table-column",{attrs:{label:"角色",prop:"role"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.onFilter(t.row.role)))])]}}])}),a("el-table-column",{attrs:{label:"用户名",prop:"name"}}),a("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.icon,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"日期",prop:"time"}}),a("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success",round:""},on:{click:function(a){e.handleAdd(t.$index,t.row)}}},[e._v("新增")]),a("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",round:"",disabled:"000001"==t.row.unionid},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"新增",visible:e.dialogAdd,top:"18vh","show-close":!1,width:"380px","custom-class":"dialogAdd"},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/manage/upload",enctype:"multipart/form-data",method:"post",name:"image[]","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.addForm.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.addForm.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.addForm.role,callback:function(t){e.$set(e.addForm,"role",t)},expression:"addForm.role"}},[a("el-option",{attrs:{label:"超级管理员",value:"0"}}),a("el-option",{attrs:{label:"管理员",value:"1"}}),a("el-option",{attrs:{label:"文案编辑",value:"2"}})],1)],1),a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[a("el-input",{attrs:{type:"password"},model:{value:e.addForm.pwd,callback:function(t){e.$set(e.addForm,"pwd",t)},expression:"addForm.pwd"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onAddSubmit("addForm")}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogAdd=!1}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit,top:"18vh","show-close":!1,width:"380px","custom-class":"dialogEdit"},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/manage/upload",enctype:"multipart/form-data",method:"post",name:"image[]","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editForm.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.editForm.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.editForm.role,callback:function(t){e.$set(e.editForm,"role",t)},expression:"editForm.role"}},[a("el-option",{attrs:{label:"超级管理员",value:"0"}}),a("el-option",{attrs:{label:"管理员",value:"1"}}),a("el-option",{attrs:{label:"文案编辑",value:"2"}})],1)],1),a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[a("el-input",{attrs:{type:"password"},model:{value:e.editForm.pwd,callback:function(t){e.$set(e.editForm,"pwd",t)},expression:"editForm.pwd"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onEditSubmit("editForm")}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"警告",visible:e.dialogDel,top:"30vh","show-close":!1,width:"320px","custom-class":"dialogDel"},on:{"update:visible":function(t){e.dialogDel=t}}},[a("span",[e._v("你确定要删除该用户吗 ?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDel=!1}}},[e._v("取 消")]),a("el-button",{on:{click:function(t){e.onDelSubmit()}}},[e._v("确 定")])],1)])],1)},ne=[],de={name:"Manage",data:function(){return{tableHeight:"",manageData:[],dialogAdd:!1,addForm:{img:"",imageUrl:"",role:"",name:"",pwd:""},addRules:{role:[{required:!0,message:"请至少选择一个活动性质",trigger:"change"}],name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]},dialogEdit:!1,editForm:{index:Number,unionid:"",img:"",imageUrl:"",role:"",name:"",pwd:"******"},editRules:{role:[{required:!0,message:"请至少选择一个活动性质",trigger:"change"}],name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]},dialogDel:!1,delForm:{index:Number,unionid:""}}},created:function(){var e=this;e.$axios.post("/api/manage/list",{},{}).then(function(t){e.manageData=t.data}).catch(function(t){e.$toast(e,"error","网络错误～")})},mounted:function(){var e=this;e.tableHeight=e.$refs.manage.offsetHeight},methods:{onFilter:function(e){switch(e){case 0:return"超级管理员";case 1:return"管理员";case 2:return"文案编辑"}},handleAdd:function(e,t){this.dialogAdd=!0},beforeAvatarUpload:function(e){var t=this,a="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<1;if(a){if(o)return a&&o;t.$toast(t,"error","上传头像图片大小不能超过 1MB!")}else t.$toast(t,"error","上传头像图片只能是 JPG PNG 格式!")},handleAvatarSuccess:function(e,t){this.dialogAdd?(this.addForm.img=e,this.addForm.imageUrl=URL.createObjectURL(t.raw)):this.dialogEdit&&(this.editForm.img=e,this.editForm.imageUrl=URL.createObjectURL(t.raw))},onAddSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.$axios.post("/api/manage/add",t.$qs.stringify(t.addForm),{}).then(function(e){e.data.status?(t.dialogAdd=!1,t.manageData.push(e.data.data[0]),t.$toast(t,"success",e.data.message)):t.$toast(t,"error",e.data.message)}).catch(function(e){t.$toast(t,"error","网络错误～")})})},handleEdit:function(e,t){this.editForm.index=e,this.editForm.unionid=this.manageData[e].unionid,this.editForm.img=this.manageData[e].img,this.editForm.imageUrl=this.manageData[e].icon,this.editForm.role=this.manageData[e].role.toString(),this.editForm.name=this.manageData[e].name,this.dialogEdit=!0},onEditSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.$axios.post("/api/manage/edit",t.$qs.stringify(t.editForm),{}).then(function(e){e.data.status?(t.manageData[t.editForm.index].role=e.data.data[0].role,t.manageData[t.editForm.index].name=e.data.data[0].name,t.manageData[t.editForm.index].time=e.data.data[0].time,t.manageData[t.editForm.index].img=e.data.data[0].img,t.manageData[t.editForm.index].icon=e.data.data[0].icon,t.dialogEdit=!1,t.$toast(t,"success",e.data.message)):t.$toast(t,"error",e.data.message)}).catch(function(e){t.$toast(t,"error","网络错误～")})})},handleDelete:function(e,t){this.delForm.index=e,this.delForm.unionid=t.unionid,this.dialogDel=!0},onDelSubmit:function(){var e=this,t={unionid:e.delForm.unionid};e.$axios.post("/api/manage/del",e.$qs.stringify(t),{}).then(function(t){t.data.status?(e.manageData.splice(e.delForm.index,1),e.dialogDel=!1,e.$toast(e,"success",t.data.message)):e.$toast(e,"error",t.data.message)}).catch(function(t){e.$toast(e,"error","网络错误～")})}}},ce=de,me=(a("be37"),Object(n["a"])(ce,le,ne,!1,null,"c8fba156",null)),ue=me.exports,pe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"member"},[o("el-table",{staticStyle:{width:"92%",margin:"0 auto"},attrs:{data:e.memberData,height:"100%"}},[o("el-table-column",{attrs:{label:"序号",prop:"id",width:"60px"}}),o("el-table-column",{attrs:{label:"昵称",prop:"nick"}}),o("el-table-column",{attrs:{label:"用户名",prop:"account"}}),o("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.icon?[o("img",{attrs:{src:e.row.icon,alt:""}})]:[o("img",{attrs:{src:a("3630"),alt:""}})]]}}])}),o("el-table-column",{attrs:{label:"时间",prop:"time"}})],1),o("el-dialog",{attrs:{title:"警告",visible:e.dialogDel,top:"30vh","show-close":!1,width:"320px","custom-class":"dialogDel","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogDel=t}}},[o("span",[e._v("你确定要删除该用户吗 ?")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogDel=!1}}},[e._v("取 消")]),o("el-button",{on:{click:function(t){e.dialogDel=!1}}},[e._v("确 定")])],1)]),o("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit,top:"10vh","show-close":!1,width:"680px","custom-class":"dialogEdit","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogEdit=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"活动名称"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"活动区域"}},[o("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[o("el-option",{attrs:{label:"区域一",value:"shanghai"}}),o("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),o("el-form-item",{attrs:{label:"活动时间"}},[o("el-col",{attrs:{span:11}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1),o("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),o("el-col",{attrs:{span:11}},[o("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),o("el-form-item",{attrs:{label:"即时配送"}},[o("el-switch",{model:{value:e.form.delivery,callback:function(t){e.$set(e.form,"delivery",t)},expression:"form.delivery"}})],1),o("el-form-item",{attrs:{label:"活动性质"}},[o("el-checkbox-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[o("el-checkbox",{attrs:{label:"美食/餐厅线上活动",name:"type"}}),o("el-checkbox",{attrs:{label:"地推活动",name:"type"}}),o("el-checkbox",{attrs:{label:"线下主题活动",name:"type"}}),o("el-checkbox",{attrs:{label:"单纯品牌曝光",name:"type"}})],1)],1),o("el-form-item",{attrs:{label:"特殊资源"}},[o("el-radio-group",{model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[o("el-radio",{attrs:{label:"线上品牌商赞助"}}),o("el-radio",{attrs:{label:"线下场地免费"}})],1)],1),o("el-form-item",{attrs:{label:"活动形式"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),o("el-button",[e._v("取消")])],1)],1)],1)],1)},fe=[],ge={name:"Member",data:function(){return{memberData:[],dialogDel:!1,dialogEdit:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},created:function(){var e=this;e.$axios.post("/api/member/list",{},{}).then(function(t){console.log(t,"res"),e.memberData=t.data,console.log(e.memberData,"that.memberData")}).catch(function(t){e.$toast(e,"error","网络错误～")})},mounted:function(){},methods:{onFilter:function(e){switch(e){case 0:return"超级管理员";case 1:return"管理员";case 2:return"用户"}},handleEdit:function(e,t){console.log(e,t),this.dialogEdit=!0},handleDelete:function(e,t){console.log(e,t),this.dialogDel=!0},handleClose:function(e){},onSubmit:function(){console.log("submit!")}}},be=ge,he=(a("6b64"),Object(n["a"])(be,pe,fe,!1,null,"3bb05990",null)),ve=he.exports,xe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Fe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dollar"},[a("div")])}],ke={name:"Dollar"},$e=ke,ye=(a("4b36"),Object(n["a"])($e,xe,Fe,!1,null,"02bb5997",null)),we=ye.exports;o["default"].use($["a"]);var _e=new $["a"]({mode:"history",base:"/",routes:[{path:"/",name:"login",component:S},{path:"/main",component:B,children:[{path:"",name:"home",component:Y},{path:"/movie",name:"movie",component:se},{path:"/manage",name:"manage",component:ue},{path:"/member",name:"member",component:ve},{path:"/dollar",name:"dollar",component:we}]}]}),Ce=a("2f62");o["default"].use(Ce["a"]);var De=new Ce["a"].Store({state:{user_icon:"",user_name:""},mutations:{set_user_icon:function(e,t){e.user_icon=t},set_user_name:function(e,t){e.user_name=t}},actions:{}}),Se=a("9483");Object(Se["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].config.productionTip=!0,o["default"].use(k["a"]),o["default"].use(F.a),o["default"].prototype.$axios=u.a,o["default"].prototype.$qs=f.a,o["default"].prototype.$toast=g,o["default"].prototype.$setCookie=b,o["default"].prototype.$getCookie=h,o["default"].prototype.$delCookie=v,new o["default"]({router:_e,store:De,render:function(e){return e(c)}}).$mount("#app")},d622:function(e,t,a){"use strict";var o=a("4ab2"),i=a.n(o);i.a},e672:function(e,t,a){"use strict";var o=a("bf35"),i=a.n(o);i.a}});