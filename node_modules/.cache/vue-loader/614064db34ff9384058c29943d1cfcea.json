{"remainingRequest":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/const/Documents/Movie/Slog/src/components/Login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/const/Documents/Movie/Slog/src/components/Login.vue","mtime":1572459224000},{"path":"/Users/const/Documents/Movie/Slog/node_modules/babel-loader/lib/index.js","mtime":1572459224000},{"path":"/Users/const/Documents/Movie/Slog/node_modules/ts-loader/index.js","mtime":1572459224000},{"path":"/Users/const/Documents/Movie/Slog/node_modules/cache-loader/dist/cjs.js","mtime":1572459224000},{"path":"/Users/const/Documents/Movie/Slog/node_modules/vue-loader/lib/index.js","mtime":1572459224000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default {\n    name: 'Login',\n    data() {\n        return {\n\t\t\tdisabled: true,\n\t\t\tloading: false,\n\t\t\tloginForm: {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: ''\n\t\t\t},\n\t\t\tloginRules: {\n                username: [\n                    { required: true, message: '请输入用户名', trigger: 'blur' },\n                    { min: 5, max: 10, message: '长度在 5 到 10 个字符', trigger: 'blur' }\n                ],\n                password: [\n                    { required: true, message: '请输入密码', trigger: 'blur' },\n                    { min: 6, max: 12, message: '长度在 6 到 12 个字符', trigger: 'blur' }\n                ]\n\t\t\t}\n        };\n\t},\n\twatch: {\n\t\tloginForm: {\n\t\t\thandler: function() {\n\t\t\t\tif ((this.loginForm.username.length > 4) && (this.loginForm.password.length > 5)) {\n\t\t\t\t\tthis.disabled = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis.disabled = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n    mounted() {\n\t\tlet that = this;\n        if (that.$getCookie('key')) {\n            this.$router.push('main');\n        }\n    },\n    methods: {\n\t\tonSubmit: function(loginForm) {\n\t\t\tlet that = this;\n\t\t\tthat.loading = true;\n\t\t\t\n\t\t\tthat.$refs[loginForm].validate((valid)=>{\n\t\t\t\tif (valid) {\n\t\t\t\t\tthat.$axios.post('/api/login/login', that.$qs.stringify(that.loginForm), {})\n\t\t\t\t\t.then(function(res) {\n\t\t\t\t\t\tconsole.log(res, '/api/login/login');\n\t\t\t\t\t\tif (res.data.status) {\n\t\t\t\t\t\t\tthat.$toast(that, 'success', res.data.message);\n\t\t\t\t\t\t\tthat.$setCookie('key', res.data.key, 1800);\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthat.$router.push('main');\n\t\t\t\t\t\t\t}.bind(this), 600);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.$toast(that, 'error', res.data.message);\n\t\t\t\t\t\t\tthat.loading = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(err) {\n\t\t\t\t\t\tthat.$toast(that, 'error', '网络错误～');\n\t\t\t\t\t\tthat.loading = false;\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n    }\n}\n",null]}